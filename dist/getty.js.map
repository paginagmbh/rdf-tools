{
  "version": 3,
  "file": "getty.js",
  "sourceRoot": "..",
  "sources": [
    "lib/getty.coffee"
  ],
  "names": [],
  "mappings": ";AAAA;AAAA,MAAA,EAAA,EAAA,GAAA,EAAA,SAAA,EAAA,KAAA,EAAA,GAAA,EAAA,IAAA,EAAA,KAAA,EAAA,OAAA,EAAA,QAAA,EAAA;;EAAA,EAAA,GAAK,OAAA,CAAQ,IAAR;;EACL,IAAA,GAAO,OAAA,CAAQ,aAAR;;EACP,OAAA,GAAU,OAAA,CAAQ,SAAR;;EACV,QAAA,GAAW,OAAA,CAAQ,UAAR;;EAEX,KAAA,GAAQ,OAAA,CAAQ,OAAR;;EACR,GAAA,GAAM,KAAA,CAAM,iBAAN;;EAEN,KAAA,GAAQ,OAAA,CAAQ,SAAR;;EAER,GAAA,GAAM;;EAEN,SAAA,GAAY,QAAA,CAAA,GAAC,UAAD,CAAA;AACZ,QAAA,CAAA,EAAA,QAAA,EAAA;IAAI,QAAA,GAAW,UAAU,CAAC,MAAX,KAAqB;IAChC,KAAA;;AAAS;MAAA,KAAA,4CAAA;;qBAAA,CAAA,OAAA,CAAA,CAAU,CAAV,CAAA,GAAA;MAAA,CAAA;;;IACT,KAAA,GAAQ,KAAK,CAAC,MAAN,CAAa,CAAC,QAAA,CAAC,GAAD,EAAM,CAAN,CAAA;aAAY;QAAE,GAAA,GAAF;QAAU,CAAC,CAAD,CAAA,EAAK;MAAf;IAAZ,CAAD,CAAb,EAAkD,CAAA,CAAlD;WACR,QAAA,CAAC,CAAE,IAAF,CAAD,CAAA;AAAa,UAAA;aAAC,QAAA,IAAY,qCAAe,KAAf;IAA1B;EAJQ;;EAMZ,GAAA,GAAM,QAAA,CAAC,EAAD,EAAK,SAAO,SAAA,CAAA,CAAZ,EAAyB,EAAzB,CAAA;AACN,QAAA,QAAA,EAAA,OAAA,EAAA;IAAI,MAAA,GAAS,OAAA,CAAQ,CAAE,GAAF,CAAR;IACT,OAAA,GAAU,QAAQ,CAAC,KAAT,CAAA,CACN,CAAC,EADK,CACF,OADE,EACQ,QAAA,CAAC,KAAD,CAAA;MACV,IAAG,MAAA,CAAO,KAAP,CAAH;QACI,GAAA,CAAI,MAAJ,EAAY,KAAZ;eACA,KAAK,CAAC,IAAN,CAAW,EAAX,EAAe;UAAE,GAAA,EAAK;QAAP,CAAf,EAFJ;OAAA,MAAA;QAII,GAAA,CAAI,MAAJ,EAAY,KAAZ;eACA,KAAK,CAAC,SAAN,CAAA,EALJ;;IADU,CADR,CAQN,CAAC,EARK,CAQF,QARE,EAQQ,QAAA,CAAA,CAAA;aAAM,EAAE,CAAC,GAAH,CAAA;IAAN,CARR;IAUV,QAAA,GAAW,QAAA,CAAC,GAAD,CAAA;MACP,GAAA,eAAK,MAAM,EAAX;MACA,IAAU,EAAV;eAAA,EAAA,CAAG,GAAH,EAAA;;IAFO;WAIX,IAAI,CAAC,IAAL,CAAU,MAAV,EAAkB,OAAlB,EAA2B,QAA3B;EAhBE;;EAkBN,MAAM,CAAC,OAAP,GACI;IAAA,GAAA,EAAK,GAAL;IACA,SAAA,EAAW,SADX;IAGA,QAAA,EAAU,SAAA,CAAU,WAAV,CAHV;IAIA,SAAA,EAAW,SAAA,CAAU,WAAV,EAAuB,QAAvB,EAAiC,kBAAjC,CAJX;IAMA,MAAA,EAAQ,QAAA,CAAA,CAAA;aACJ,IAAI,CAAC,QAAQ,CAAC,GAAd,CAAkB,IAAI,EAAE,CAAC,YAAP,CAAA,CAAlB,EAA0C,KAAA,CAAM,4BAAN,CAA1C;IADI;EANR;AArCJ",
  "sourcesContent": [
    "N3 = require \"n3\"\nmiss = require \"mississippi\"\nrequest = require \"request\"\nunzipper = require \"unzipper\"\n\ndebug = require \"debug\"\nlog = debug \"rdf-tools:getty\"\n\nnt2nq = require \"./nt2nq\"\n\nurl = \"http://vocab.getty.edu/dataset/aat/explicit.zip\"\n\naatFilter = (components...) ->\n    matchAll = components.length is 0\n    paths = (\"AATOut_#{c}.nt\" for c in components)\n    paths = paths.reduce ((idx, p) -> { idx..., [p]: true }), {}\n    ({ path }) -> matchAll or (paths[path] ? false)\n\naat = (to, filter=aatFilter(), cb) ->\n    source = request { url }\n    extract = unzipper.Parse()\n        .on \"entry\" , (entry) ->\n            if filter entry\n                log \"+ %o\", entry\n                entry.pipe to, { end: false }\n            else\n                log \"- %o\", entry\n                entry.autodrain()\n        .on \"finish\", () -> to.end()\n\n    callback = (err) ->\n        log (err ? to)\n        cb err if cb\n\n    miss.pipe source, extract, callback\n\nmodule.exports =\n    aat: aat\n    aatFilter: aatFilter\n\n    subjects: aatFilter \"1Subjects\"\n    hierarchy: aatFilter \"1Subjects\", \"2Terms\", \"HierarchicalRels\"\n\n    parsed: () ->\n        miss.pipeline.obj new N3.StreamParser(), (nt2nq \"http://vocab.getty.edu/aat\")"
  ]
}